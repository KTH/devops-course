# Course automation: Checking essay requirements

## Members

Martijn Atema (atema@kth.se)
GitHub: [Atema](https://github.com/Atema)

## Proposal

I want to create a GitHub action (on pull requests) that automatically checks whether the word count and plagarism are within defined boundaries.

In order, this action should:

- Determine if the pull request concerns an essay submission
- Find the submitted pdf file
- Check the word count within the file
- Submit the file to a plagiarism check service
- Report the status on the PR

## Submission

With my submission, I aim for the following grading criteria. Further explaination is given in the sections below. An example of the action in action can be found [in this PR](https://github.com/Atema/devops-course/pull/1).

|                                             | Yes | No | Remarkable  |
|-------------------------------------------- | ----|----|-------------|
|The work is done before April 6, 2021 (in order to be useful for the course) | Yes | No | n-a|
|The automation task produces a PR status or issue / PR comment | **üî• Yes** | No | Points to a generated page with valuable additional information |
|The automation task is reusable | **üî• Yes (next year for this course)** | No | **üî• In other courses than this one** |
|The task runs on a standard platform | **üî• Yes (Github action)** | No | Other platforms (e.g. Moodle, Canvas) |
|The task is praised by the other students of this course | üôè Yes | No | n-a |
|The code for the task is available | **üî• Yes (public repo)** | No | **üî• Well documented repo** |

## The action

I developed the action in JavaScript to run on the GitHub Actions platform; it is available in [Atema/pdf-essay-checker-action](https://github.com/Atema/pdf-essay-checker-action). Documentation is available in the repository's README, and includes all options that can be customised, together with a sample configuration that shows how to install the action in your own repository (using a workspace file). Because the action is customisable using input parameters, it is perfectly reusable in future iterations of this course, as well as other courses. It supports setting the minimum and maximum limits for the checks, and supports two ways of reporting the results (as the status of the action, and as a comment on the PR).

## Word count

[PDF.js](https://github.com/mozilla/pdf.js) is used to parse the text of the detected PDF files, after which [words-count](https://www.npmjs.com/package/words-count) is applied for accurate multi-language word counting. In general, the results of this method should be very similar to the counts generated by the recommended combination of `pdftotext` and `wc -w`, although there will probably be slight differences. For this reason, I have set the minimum and maximum count to 1800 and and 2200 respectively (2000 +- 10%). If wanted, these margins can easily be decreased by changing the configuration file.

## Plagiarism checking

A component that should have been part of this action, but is not, is plagiarism checking. It turned out to be impossible to include this service properly. Although there are several services available online, they are all closed and paid, and it is unclear how reliable they are. I'm aware that KTH has an agreement with [Ouriginal](https://www.ouriginal.com) (previously Urkund); however, they do not have an open API (it is only available to selected partners like Canvas).
